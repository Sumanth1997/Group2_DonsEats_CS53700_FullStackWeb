const admin = require('firebase-admin');
// const serviceAccount = require('./serviceAccountKey.json'); // Path to your service account key

// Decode the environment variable and parse it into an object
const serviceAccount = JSON.parse(
   Buffer.from(process.env.FIREBASE_CREDENTIALS, 'base64').toString('utf8')
);


admin.initializeApp({
  credential: admin.credential.cert(serviceAccount),
  // ... other config if needed
});

const db = admin.firestore();
const donsMenuItems = {
    "Epic Eats": {
    "Meal Swipe Deals": [
      {
        title: "Meal Swipe Deal",
        price: "8.75 USD",
        imageUrl: "/Images/Dons/meal-swipe-deal.jpg",
        description: "Includes Entrée of the Day with 2 sides and a 16 oz. fountain drink."
      }
    ],
    "À La Carte": [
      {
        title: "Entrée",
        price: "6.95 USD",
        imageUrl: "/Images/Dons/a-la-carte-entree.jpg",
        description: "A standalone entrée option for your meal."
      },
      {
        title: "Side",
        price: "2.25 USD",
        imageUrl: "/Images/Dons/a-la-carte-side.jpg",
        description: "Pick a side dish of your choice."
      }
    ]
  },
  "Mozzie's": {
    "Pizza Deals": [
      {
        title: "Pizza Meal Swipe Deal",
        price: "8.75 USD",
        imageUrl: "/Images/Dons/pizza-meal-deal.jpg",
        description: "Includes a 7\" personal pizza with 2 sides and a 16 oz. fountain drink."
      },
      {
        title: "7\" Cheese Pizza",
        price: "5.85 USD",
        imageUrl: "/Images/Dons/cheese-pizza.jpg",
        description: "Classic handcrafted cheese pizza."
      },
      {
        title: "BYO Pizza",
        price: "6.65 USD",
        imageUrl: "/Images/Dons/byo-pizza.jpg",
        description: "Build your own pizza with your favorite toppings."
      }
    ],
    "Pasta Deals": [
      {
        title: "Pasta Meal Swipe Deal",
        price: "8.75 USD",
        imageUrl: "/Images/Dons/pasta-meal-deal.jpg",
        description: "Includes Chef's pasta bake with 2 sides and a 16 oz. fountain drink."
      },
      {
        title: "BYO Pasta",
        price: "6.65 USD",
        imageUrl: "/Images/Dons/byo-pasta.jpg",
        description: "Create your own pasta with a variety of ingredients."
      }
    ],
    "À La Carte": [
      {
        title: "Side of the Day",
        price: "2.25 USD",
        imageUrl: "/Images/Dons/side-of-the-day.jpg",
        description: "Freshly prepared side dish."
      }
    ]
  },
  "Deliss": {
    "Meal Swipe Deals": [
      {
        title: "Sub Meal Swipe Deal",
        price: "8.75 USD",
        imageUrl: "/Images/Dons/sub-meal-deal.jpg",
        description: "Includes a 6\" sub sandwich with 2 sides and a 16 oz. fountain drink."
      }
    ],
    "À La Carte": [
      {
        title: "6\" Sub Sandwich",
        price: "6.05 USD",
        imageUrl: "/Images/Dons/sub-sandwich.jpg",
        description: "Freshly made 6\" sub sandwich with your choice of fillings."
      },
      {
        title: "Deli Wrap",
        price: "6.05 USD",
        imageUrl: "/Images/Dons/deli-wrap.jpg",
        description: "A wholesome wrap filled with fresh ingredients."
      },
      {
        title: "Homemade Potato Chips",
        price: "1.45 USD",
        imageUrl: "/Images/Dons/potato-chips.jpg",
        description: "Crispy and freshly made potato chips."
      }
    ]
  },
  "Central Grill Co.": {
    "Meal Swipe Deals": [
      {
        title: "Grill Meal Swipe Deal",
        price: "8.75 USD",
        imageUrl: "/Images/Dons/grill-meal-deal.jpg",
        description: "Includes any sandwich with 2 sides and a 16 oz. fountain drink."
      }
    ],
    "À La Carte": [
      {
        title: "Classic Burger",
        price: "6.65 USD",
        imageUrl: "/Images/Dons/classic-burger.jpg",
        description: "Juicy grilled burger with fresh toppings."
      },
      {
        title: "Veggie Burger",
        price: "6.65 USD",
        imageUrl: "/Images/Dons/veggie-burger.jpg",
        description: "A hearty burger made with a vegetable patty."
      },
      {
        title: "Grilled Chicken Sandwich",
        price: "6.65 USD",
        imageUrl: "/Images/Dons/grilled-chicken.jpg",
        description: "Tender grilled chicken on a toasted bun."
      },
      {
        title: "Chicken Tenders",
        price: "6.65 USD",
        imageUrl: "/Images/Dons/chicken-tenders.jpg",
        description: "Golden and crispy chicken tenders."
      },
      {
        title: "Chef's Grill of the Day",
        price: "6.65 USD",
        imageUrl: "/Images/Dons/chefs-grill.jpg",
        description: "Daily special grill item prepared by the chef."
      }
    ],
    "Sides & Extras": [
      {
        title: "Cheese",
        price: "0.55 USD",
        imageUrl: "/Images/Dons/cheese.jpg",
        description: "Add a slice of cheese to your meal."
      },
      {
        title: "French Fries",
        price: "2.25 USD",
        imageUrl: "/Images/Dons/french-fries.jpg",
        description: "Golden, crispy French fries."
      }
    ]
  },
  "Saborijos": {
    "Meal Swipe Deals": [
      {
        title: "Entree of the Day",
        price: "8.75 USD",
        imageUrl: "/Images/Dons/entree-of-the-day.jpg",
        description: "Includes entrée of the day with 2 sides and a 16 oz. fountain drink."
      }
    ],
    "À La Carte Sides": [
      {
        title: "Spanish Rice",
        price: "2.25 USD",
        imageUrl: "/Images/Dons/spanish-rice.jpg",
        description: "Seasoned rice with traditional Spanish flavors."
      },
      {
        title: "Beans",
        price: "2.25 USD",
        imageUrl: "/Images/Dons/beans.jpg",
        description: "Slow-cooked beans with savory spices."
      },
      {
        title: "Chips & Queso",
        price: "2.25 USD",
        imageUrl: "/Images/Dons/chips-queso.jpg",
        description: "Crunchy chips served with creamy queso dip."
      }
    ]
  },
  "Weekly Grill Specials": {
    "Monday": [
      {
        title: "5 Spice BBQ Chicken Tenders",
        price: "6.65 USD",
        imageUrl: "/Images/Dons/bbq-chicken-tenders.jpg",
        description: "BBQ chicken tenders spiced to perfection."
      }
    ],
    "Tuesday": [
      {
        title: "Pimento Grilled Cheese Sandwich",
        price: "6.65 USD",
        imageUrl: "/Images/Dons/pimento-grilled-cheese.jpg",
        description: "Grilled cheese sandwich with creamy pimento filling."
      }
    ],
    "Wednesday": [
      {
        title: "Italian Sausage",
        price: "6.65 USD",
        imageUrl: "/Images/Dons/italian-sausage.jpg",
        description: "Savory Italian sausage served hot."
      }
    ],
    "Thursday": [
      {
        title: "Chili Cheese Dog",
        price: "6.65 USD",
        imageUrl: "/Images/Dons/chili-cheese-dog.jpg",
        description: "Hot dog topped with chili and melted cheese."
      }
    ],
    "Friday": [
      {
        title: "Black and Bleu Burger",
        price: "6.65 USD",
        imageUrl: "/Images/Dons/black-bleu-burger.jpg",
        description: "Burger topped with blue cheese and blackened spices."
      }
    ]
  }
  };

async function uploaddonsMenuItems() {
  try {
    for (const category in donsMenuItems) {
      for (const subcategory in donsMenuItems[category]) {
        for (const item of donsMenuItems[category][subcategory]) {
          // Create a properly formatted document object.
          const menuItemDocument = {
            category: category,
            subcategory: subcategory,
            title: item.title,
            price: item.price,
            imageUrl: item.imageUrl,
            description: item.description,
          };


          await db.collection('donsMenuItems').add(menuItemDocument);  // Add to Firestore
          console.log(`Added item: ${item.title} (Category: ${category}, Subcategory: ${subcategory})`);
        }
      }
    }
    console.log("Menu items uploaded successfully!");
  } catch (error) {
    console.error("Error uploading menu items:", error);
  }
}

uploaddonsMenuItems();
